<% if @lession.present? %>
<div class="container">
  <div style="display: flex">
    <div class="card" style="width: 18rem;">
      <img class="card-img-top" src="<%= @lession.image %>" alt="Card image cap">
      <div class="card-body">
        <p class="card-title"><strong>Tên bài học: </strong><%= @lession.name %></p>
        <p class="card-text"><strong>Thời gian hoàn thành: </strong><%= @lession.duration %></p>
        <p class="card-text"><strong>Mô tả: </strong><%= @lession.description %></p>
      </div>
    </div>
    <div style="margin-left: 10rem">
        <strong>Các Nhiện vụ của bài học</strong>
      <% if @lession&.tasks.size == 0 %>
        <div class="alert alert-warning" role="alert">
          chưa có nhiện vụ nào cho bài học này
        </div>
      <% else %>
        <table class="table table-bordered">
          <thead>
          <th>STT</th>
          <th>Nội dung nhiệm vụ</th>
          <th>Mô tả</th>
          </thead>
          <% @lession.tasks.each_with_index  do |task, index| %>
            <tr>
              <td><%= index + 1 %></td>
              <td><%= task.title %></td>
              <td><%= task.description %></td>
            </tr>
          <% end %>
        </table>

      <% end %>
      <div style="display: flex; justify-content: flex-end">
        <button onclick="showFormAddTask()" id="addButton">Thêm Task</button>
      </div>
      <div id="addTask" style="display: none">
        <%= form_for :task,  url: {action: :create, controller: :tasks} do |form| %>
          <div class="form-group">
            <%= form.label :title %>
            <%= form.text_field  :title, class: "form-control", :required => true %>
          </div>
          <div class="form-group">
            <%= form.label :description %>
            <%= form.text_field  :description, class: "form-control", :required => true %>
          </div>
            <%= form.hidden_field  :lession_id, value: @lession.id %>
          <div class="actions">
            <%= form.submit "Thêm task", class: "btn btn-primary" %>

          </div>

        <% end %>
        <button class="btn btn-primary" onclick="closeForm()" id="closeForm">Đóng</button>
      </div>

    </div>
  </div>
</div>

<%= link_to 'Edit', edit_lession_path(@lession) %> |
<%= link_to 'Back', lessions_path %>
<% end %>
<script>
    function showFormAddTask (){
        document.getElementById("addTask").style.display   = "block"
        document.getElementById("addButton").style.display   = "none"
    }
    function hideFormAddTask (){
        document.getElementById("addButton").style.display   = "block"
        document.getElementById("addTask").style.display   = "none"
    }
    function closeForm(){
        document.getElementById("addButton").style.display   = "block"
        document.getElementById("addTask").style.display   = "none"
    }

</script>